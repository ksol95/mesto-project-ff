(()=>{"use strict";var e=function(e){e.target.closest(".card").remove()},t=function(e){e.target.classList.toggle("card__like-button_is-active")};function r(r,o,n,i){var c=r.querySelector(".card").cloneNode(!0);return c.querySelector(".card__image").src=o,c.querySelector(".card__image").setAttribute("alt",n),c.querySelector(".card__image").addEventListener("click",i),c.querySelector(".card__title").textContent=n,c.querySelector(".card__delete-button").addEventListener("click",e),c.querySelector(".card__like-button").addEventListener("click",t),c}var o=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"popup__error_visible",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"popup__input_type_error",n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(o),n.classList.remove(r),n.textContent=""},n=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"popup__button_disabled";!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.classList.remove(r):t.classList.add(r)},i=document.querySelectorAll(".popup"),c=function(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",a)},u=function(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",a)},a=function(e){"Escape"===e.key&&c(document.querySelector(".popup_is-opened"))},p=document.querySelector("#card-template").content,s=document.querySelector(".places__list"),l=document.querySelector(".profile__title"),d=document.querySelector(".profile__description"),_=document.querySelector(".profile__edit-button"),m=document.querySelector(".popup_type_edit"),y=document.querySelector(".popup__form[name='editProfile']"),v=y.querySelector(".popup__input_type_name"),f=y.querySelector(".popup__input_type_description"),S=document.querySelector(".profile__add-button"),q=document.querySelector(".popup_type_new-card"),g=document.querySelector(".popup__form[name='new-place']"),b=g.querySelector(".popup__input[name='place-name']"),k=g.querySelector(".popup__input[name='link']"),L=document.querySelector(".popup_type_image"),h=L.querySelector(".popup__image"),E=L.querySelector(".popup__caption"),C=function(e){h.src=e.target.getAttribute("src"),h.alt=e.target.getAttribute("alt"),h.title=e.target.getAttribute("alt"),E.textContent=e.target.getAttribute("alt"),u(L)},x={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};i.forEach((function(e){e.classList.add("popup_is-animated"),e.querySelector(".popup__close").addEventListener("click",(function(){c(e)})),e.addEventListener("click",(function(t){t.target.classList.contains("popup_is-opened")&&c(e)}))})),[{name:"Тольятти",link:"https://images.unsplash.com/photo-1602529080346-47d4c76dad5d?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){s.append(r(p,e.link,e.name,C))})),S.addEventListener("click",(function(){u(q)})),g.addEventListener("submit",(function(e){e.preventDefault(),s.prepend(r(p,k.value,b.value,C)),c(q),e.target.reset()})),_.addEventListener("click",(function(){v.value=l.textContent,f.value=d.textContent,function(e,t){var r=e.querySelector(t.submitButtonSelector);Array.from(e.querySelectorAll(t.inputSelector)).forEach((function(r){r.setCustomValidity(""),o(e,r,t.errorClass,t.inputErrorClass)})),r.classList.remove(t.inactiveButtonClass)}(y,x),u(m)})),y.addEventListener("submit",(function(e){e.preventDefault(),d.textContent=f.value,l.textContent=v.value,c(m)})),function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()}));var r=Array.from(t.querySelectorAll(e.inputSelector)),i=t.querySelector(e.submitButtonSelector);n(r,i,e.inactiveButtonClass),r.forEach((function(c){c.addEventListener("input",(function(){!function(e,t,r,n){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?o(e,t,r,n):function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"popup__error_visible",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"popup__input_type_error",i=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n),i.textContent=r,i.classList.add(o)}(e,t,t.validationMessage,r,n)}(t,c,e.errorClass,e.inputErrorClass),n(r,i,e.inactiveButtonClass)}))}))}))}(x)})();